{"version":3,"file":"discount-3d4739e3.js","sources":["../../src/js/api.js","../../src/js/filters.js","../../src/js/prodacts-list.js","../../src/js/popular-prodacts.js","../../src/js/discount.js"],"sourcesContent":["import axios from \"axios\";\n\nconst BASE_URL = \"https://food-boutique.b.goit.study/api\";\n\n\n// Перелік категорій продуктів\n\nexport async function getProductsCategories() {\n    try {\n        const categories = await axios.get(`${BASE_URL}/products/categories`)\n        return categories;\n    }\n    catch (error) {\n        console.log(error.message);\n    }\n}\n// --перевірка запита\ngetProductsCategories().then(categories => console.log(categories));\n\n// Детальна інформація про продукт (ID)\n\nexport async function getProductById(id) {\n    try {\n        const response = await axios.get(`${BASE_URL}/products/${id}`);\n        return response.data;\n    }\n    catch (error) {\n        console.log(error.message);\n    }\n}\n// --перевірка запита\nlet productId = \"640c2dd963a319ea671e3676\";\ngetProductById(productId).then(product => console.log(product));\n\n// Перелік популярних продуктів\n\nexport async function getPopularProduct() {\n    try {\n        const popularProducts = await axios.get(`${BASE_URL}/products/popular?limit=5`)\n        return popularProducts;\n    }\n    catch (error) {\n        console.log(error.message);\n    }\n}\n// --перевірка запита\ngetPopularProduct().then(product => console.log(product));\n\n// Перелік продуктів зі знижкою\n\nexport async function getDiskountProduct() {\n    try {\n        const diskountProduct = await axios.get(`${BASE_URL}/products/discount`);\n        return diskountProduct;\n    }\n    catch (error) {\n        console.log(error.message);\n    }\n}\n// --перевірка запита\ngetDiskountProduct().then(product => console.log(product));\n\n// Перелік продуктів з фільтрацією\n\nexport async function getFilteredProduct({\n    keyword,\n    category,\n    byABC = true,\n    byPrice = false,\n    byPopularity = false,\n    page = 1,\n    limit = 6,\n}) {\n    try {\n        const params = new URLSearchParams({\n    category,\n    byABC: byABC ? \"true\" : \"false\",\n    byPrice: byPrice ? \"true\" : \"false\",\n    byPopularity: byPopularity ? \"true\" : \"false\",\n    page,\n    limit,\n        })\n        if (keyword) {\n            params.append(\"keyword\", keyword);\n        }\n        const response = await axios.get(`${BASE_URL}/products?${params}`);\n        return response.data;\n    }\n    catch (error) {\n        console.log(error.message);\n    }\n}\n// --перевірка запита\nconst filters = {\n    category: \"Fresh_Produce\",\n    byABC: true,\n    byPrice: false,\n    byPopularity: false,\n    page: 1,\n    limit: 6,\n}\n\ngetFilteredProduct(filters).then(product => console.log(product));\n\n// Оформлення підписки на розсилку нових продуків\n\nconst emailToAdd = {\n    email: \"ssss@Comment.ua\",\n};\n\nexport async function postSubscription(data) {\n    const response = await axios.post(`${BASE_URL}/subscription`, data);\n    return response.data;\n} \n// --перевірка запита\npostSubscription(emailToAdd).then(data => console.log(data)).catch(error => console.log(error.message));\n\n// Оформлення замовлення продуктів\n\nexport async function postOrders(data) {\n    const response = await axios.post(`${BASE_URL}/orders`, data);\n    return response.data;\n}\n// --перевірка запита\nconst orderToAdd = {\n    email: \"ssss@Comment.ua\",\n    products: [{\n        \"productId\": \"640c2dd963a319ea671e383b\",\n        \"amount\": 2\n        }]\n    };\npostOrders(orderToAdd).then(data => console.log(data)); \n\n","import { getProductsCategories, getFilteredProduct } from './api.js';\n\nconst refs = {\n  filterCatList: document.querySelector('.filters-categories'),\n  form: document.getElementById('fiters-form'),\n  filtersInput: document.querySelector('.filters-input'),\n  filtersCategories: document.querySelector('.filters-categories'),\n};\n\nrefs.form.addEventListener('submit', handleFiltersSubmit);\n\nfunction loadCategories() {\n  try {\n    const categoriesList = getProductsCategories();\n    const data = categoriesList.data;\n    for (let i = 0; i < data.length; i++) {\n      refs.filterCatList.insertAdjacentHTML(\n        'beforeend',\n        `<option value=\"${data[i]}\">${data[i]}</option>`\n      );\n    }\n  } catch (error) {\n    console.log('err');\n  }\n}\n\nloadCategories();\n\nconst localvalue = { keyword: null, category: null, page: 1, limit: 6 };\n\nasync function handleFiltersSubmit(event) {\n  const filtersValue = refs.filtersInput.value;\n  localvalue.keyword = filtersValue;\n  if (filtersValue === '') {\n    localvalue.keyword = null;\n  }\n  const filtersCatValue = refs.filtersCategories.value;\n  localvalue.category = filtersCatValue;\n  if (filtersCatValue === '') {\n    localvalue.category = null;\n  }\n  localStorage.setItem('filters', JSON.stringify(localvalue));\n\n  const filters = {\n    keyword: filtersValue,\n    category: filtersCatValue,\n    byABC: true,\n    byPrice: false,\n    byPopularity: false,\n    page: 1,\n    limit: 6,\n  };\n}\n\nchangeForm();\n\nfunction changeForm() {\n  const filtersParce = JSON.parse(localStorage.getItem('filters'));\n  refs.filtersInput.value = filtersParce.keyword;\n  refs.filtersCategories.value = filtersParce.category;\n}\n","// функція для отримання продуктів з сервера\n\nasync function getProductsList(keyword, category, page = 1, limit = 6) {\n  const url = `https://food-boutique.b.goit.study/api/products?keyword=${keyword}&category=${category}&page=${page}&limit=${limit}`;\n\n  try {\n    const response = await fetch(url);\n    const products = await response.json();\n    return products.results;\n  } catch (error) {\n    console.error('Error fetching products:', error);\n    return [];\n  }\n}\n\n// Функція для визначення ліміту в залежності від розміру екрану\n\nfunction getLimit() {\n  const screenWidth = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;\n\n  if (screenWidth >= 1440) {\n    return 9;\n  } else if (screenWidth >= 768) {\n    return 8;\n  } else {\n    return 6; // значення за замовчуванням\n  }\n}\n\n//картка продукта\n\nfunction renderProductCard(product) {\n  return `\n    <div class=\"productlist-card\" data-productlist-id=\"${product._id}\">\n      <div class=\"productlist-background\">\n        <img src=\"${product.img}\" alt=\"${product.name}\" class=\"product-image\">\n      </div>\n      <div class=\"productlist-details\">\n        <div class=\"productlist-details-text\">\n          <h2 class=\"productlist-name\">${product.name}</h2>\n          <div class=\"pl-det\">\n          \n          <div class=\"category-cont\">\n          <p class=\"productlist-category\">Category:\n          <span class=\"word\">${product.category}</span></p>\n\n          <p class=\"productlist-size\">Size:\n          <span class=\"word\">${product.size}</span></p>\n          </div>\n\n          <div class=\"popularity-cont\">\n          <p class=\"productlist-popularity\">Popularity:\n          <span class=\"word\">${product.popularity}</span></p>\n          </div>\n\n          </div>\n          <div class=\"price-icon\">\n          <p class=\"productlist-price\">$${product.price.toFixed(2)}</p>\n          <div class=\"price-icon-cont\">\n          <svg class=\"productlist-icon\" width=\"18\" height=\"18\">\n            <use href=\"../icons.svg#icon-shopping-cart\"></use>\n          </svg>\n          </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  `;\n}\n\nasync function fetchAndRenderProducts(page = 1) {\n  const keyword = 'Ac';\n  const category = 'Fresh_Produce';\n  const limit = getLimit();\n\n  try {\n    const response = await getProductsList(keyword, category, page, limit);\n    const products = response;\n\n    const productList = document.getElementById('productList');\n    productList.innerHTML = '';\n\n    products.forEach(product => {\n      productList.innerHTML += renderProductCard(product);\n    });\n\n    const totalPages = Math.ceil(response.total / limit);\n    renderPagination(totalPages, page);\n  } catch (error) {\n    console.error('Помилка:', error);\n  }\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  fetchAndRenderProducts();\n});\n\n// функция для смены страницы\nwindow.changePage = function(page) {\n  fetchAndRenderProducts(page);\n};\n\nwindow.addEventListener('resize', fetchAndRenderProducts);\n\n// подключение файла пагинации\nvar script = document.createElement('script');\nscript.src = '/js/pagination.js';\ndocument.head.appendChild(script);","import { getPopularProduct } from './api.js';\n// async function getPopularProduct() {\n//   try {\n//     const popularProducts = await axios.get(\n//       `${BASE_URL}/products/popular?limit=5`\n//     );\n//     return popularProducts;\n//   } catch (error) {\n//     console.log(error.message);\n//   }\n// }\n// --перевірка запита\ngetPopularProduct().then(product => console.log(product));\n","function getRandomProducts(products, count) {\n  const shuffledProducts = products.sort(() => 0.5 - Math.random());\n  return shuffledProducts.slice(0, count);\n}\n\nimport { getDiskountProduct } from './api';\n\n  function renderDiscountProductCard(product) {\n    return `\n      <div class=\"product-card\">\n        <div class=\"product-background\">\n\n        <div class=\"discount-label\">\n      <svg class=\"dicount-label-icon\">\n      <use href=\"../icons.svg#icon-discount\"></use>\n      </svg>\n      </div>\n\n          <img src=\"${product.img}\" alt=\"${product.name}\" class=\"product-image\">\n        </div>\n        <div class=\"product-details\">\n          <div class=\"details-text\">\n\n          <div class=\"name-price\">\n          <h2 class=\"product-name\">${product.name}</h2>\n          <p class=\"product-price\">$${product.price.toFixed(2)}</p>\n          </div>\n\n          <div class=\"discount-icon-cont\">\n          <svg class=\"discount-icon\" width=\"34\" height=\"34\">\n            <use href=\"../icons.svg#icon-heroicons-solid_shopping-cart\"></use>\n          </svg>\n          </div>\n\n        </div>\n      </div>\n    `;\n  }\n  \nasync function renderDiscountProducts() {\n  try {\n    const products = await getDiskountProduct();\n\n    // Перевірте, чи products - це масив\n    if (!Array.isArray(products)) {\n      console.error(\"Невірний формат даних: Очікувався масив.\");\n      return;\n    }\n\n    // Перевірте, чи масив products не порожній\n    if (products.length === 0) {\n      console.warn(\"Немає доступних товарів зі знижкою.\");\n      return;\n    }\n\n    const randomProducts = getRandomProducts(products, 2);\n    const discountContainer = document.getElementById('discountContainer');\n\n    const fragment = document.createDocumentFragment();\n    randomProducts.forEach(product => {\n      fragment.appendChild(renderDiscountProductCard(product));\n    });\n\n    discountContainer.appendChild(fragment);\n  } catch (error) {\n    console.error(error.message);\n  }\n}\n\n// Fetch discount products and render them\ngetDiskountProduct()\n  .then(response => response.data)\n  .then(products => {\n    const randomProducts = getRandomProducts(products, 2);\n    const discountContainer = document.getElementById('discountContainer');\n\n    randomProducts.forEach(product => {\n      discountContainer.innerHTML += renderDiscountProductCard(product);\n    });\n  })\n  .catch(error => {\n    console.error(error.message);\n  });"],"names":["BASE_URL","getProductsCategories","axios","error","categories","getProductById","id","productId","product","getPopularProduct","getDiskountProduct","getFilteredProduct","keyword","category","byABC","byPrice","byPopularity","page","limit","params","filters","emailToAdd","postSubscription","data","postOrders","orderToAdd","refs","handleFiltersSubmit","loadCategories","i","localvalue","event","filtersValue","filtersCatValue","changeForm","filtersParce","getProductsList","url","getLimit","screenWidth","renderProductCard","fetchAndRenderProducts","response","products","productList","totalPages","script","getRandomProducts","count","renderDiscountProductCard","randomProducts","discountContainer"],"mappings":"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"}